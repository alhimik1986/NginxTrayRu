NginxTrayRu
=============

NginxTrayRu - это трей, такой же как у apache, только он для веб-сервера nginx.

NginxTrayRu очень универсален.<br>
Им также можно запускать apache и mysql, в общем, что угодно.<br>
Можно даже сделать собственную WAMP-сборку и запускать ее с помощью NginxTrayRu.<br>
Делая копии файлов NginxTrayRu.exe, с соответствующими настройками, можно запускать соответствующие комбинации сборок, например, apache+php, nginx+php-cgi, nginx+php-development.<br>

Проект был доработан мной из исходника https://nginxtray.codeplex.com/, где автором был DragonE.<br>
Требования (OS Windows, .net Framework 2.0+).

<h2>Характеристики:</h2>
	1. Тот же интерфейс управления, что и у apache
	2. Можно прописывать относительные пути для файлов
	3. Можно задавать переменные окружения
	4. Возможность стартовать с Windows
	5. Уведомление о "крушении" процесса, рестарт сервера при "крушении" процесса.
	6. Запуск сервера при запуске программы и остановка сервера при выходе.

<h2>Инстркуция:</h2>
	1. Скопируйте файл NginxTrayRu.exe.exe в ту же папку, где находится исполняемый файл nginx.exe
	2. Запустите файл NginxTrayRu.exe
	3. Перейдите по адресу http://localhost, чтобы убедиться, что все работает.
	4. Чтобы не выскакивало сообщение об ошибке, зайдите в настройки и удалите 2-ю строчку в полях
	"Запускаемый файл" и "Аргументы запуска" и перезапустите сервер

Левый клик по иконке открывает "Запуск", "Остановка", "Перезапуск" сервера,
правый - открывает "Настройки" и "Выход"
Убедитесь, что в папках, где находтися nginx-сервер не было русских букв

<h2>Настройка PHP FastCGI</h2>
	1. В файле conf/nginx.conf пропишите настройки PHP FastCGI
	2. Зайдите в настройки NginxTrayRu
	3. Пропишите путь к файлу php-cgi.exe в поле "Запускаемый файл", а в поле "Аргументы запуска"
	в той же строчке - аргументы, например: -b 127.0.0.1:9000 -c php.ini
	4. Сохраните и перезапустите сервер

<h2>Настройка PHP FastCGI (многопоточность)</h2>
	1. В файле conf/nginx.conf допишите следующие настройки:
	http {

		location ~ \.php$ {
			fastcgi_pass  myproject;
		}

		upstream myproject {
		server 127.0.0.1:9000;
		server 127.0.0.1:9001;
		server 127.0.0.1:9002;
		server 127.0.0.1:9003;
		server 127.0.0.1:9004;
		}

		server {
			listen 127.0.0.1:80;
			server_name localhost;
		}
	}
	2. Зайдите в настройки и в поле "Запускаемый файл" пропишите 5 раз путь к php-cgi.exe,
	а в "Аргументах запуска" в соответствующих строчках:
	-b 127.0.0.1:9000
	-b 127.0.0.1:9001
	-b 127.0.0.1:9002
	-b 127.0.0.1:9003
	-b 127.0.0.1:9004
	3. Сохраните и перезапустите сервер

<h2>Теперь можно завершать процессы посредством командной строки.</h2>
При этом оставшиеся процессы будут завершены классическим способом.
Это нужно для корректной остановки и перезапуска веб-серверов и баз данных.
Процесс завершения происходит следующим образом:
	во время запуска NginxTrayRu запоминает ID запущенных процессов;
	когда задана команда завершения, то сперва выполняются команды завершения в текстовых полях, 
а затем уже идет завершение всех оставшихся процессов по их ID, которые NginxTrayRu запомнил во время 
запуска этих процессов.
